---
interface Props {
  variant?: 'card' | 'inline';
}

const { variant = 'card' } = Astro.props;

const offices = [
  {
    name: 'Kingsbridge Office',
    address: ['48 Fore Street', 'Kingsbridge', 'Devon TQ7 1PE'],
    phone: '01548 852727',
    mapUrl: 'https://maps.google.com/maps?q=48+Fore+Street+Kingsbridge+TQ7+1PE&t=&z=16&ie=UTF8&iwloc=&output=embed',
    hours: 'Mon-Fri: 9:00am - 5:00pm',
  },
  {
    name: 'Totnes Office',
    address: ['58-60 Fore Street', 'Totnes', 'Devon TQ9 5RU'],
    phone: '01803 862233',
    mapUrl: 'https://maps.google.com/maps?q=58-60+Fore+Street+Totnes+TQ9+5RU&t=&z=16&ie=UTF8&iwloc=&output=embed',
    hours: 'Mon-Fri: 9:00am - 5:00pm',
  },
];
---

<div class:list={[
  variant === 'card'
    ? 'grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8'
    : 'space-y-6',
]}>
  {offices.map((office) => (
    <div class:list={[
      variant === 'card'
        ? 'bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden'
        : '',
    ]}>
      {variant === 'card' && (
        <div class="aspect-video">
          <iframe
            src={office.mapUrl}
            class="w-full h-full border-0"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title={`Map showing ${office.name} location`}
          ></iframe>
        </div>
      )}
      <div class:list={[variant === 'card' ? 'p-6' : '']}>
        <h3 class="font-(family-name:--font-heading) text-lg font-semibold text-navy mb-3">
          {office.name}
        </h3>
        <address class="not-italic text-sm text-gray-600 space-y-2">
          <p>{office.address.join(', ')}</p>
          <p>
            <a href={`tel:${office.phone.replace(/\s/g, '')}`} class="text-navy font-medium hover:text-gold transition-colors">
              {office.phone}
            </a>
          </p>
          <p>{office.hours}</p>
        </address>
      </div>
    </div>
  ))}
</div>
